{"version":3,"sources":["../../../lib/src/widget-library/add-reference.component.ts"],"names":[],"mappings":"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","file":"add-reference.component.js","sourceRoot":"","sourcesContent":["import { Component, DoCheck, Input, OnInit } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\nimport { JsonSchemaFormService } from '../json-schema-form.service';\nexport class AddReferenceComponent implements OnInit, DoCheck {\r\n  options: any;\r\n  itemCount: number;\r\n  showAddButton: boolean = true;\r\n  previousLayoutIndex: number[];\r\n  previousDataIndex: number[];\r\n   formID: number;\r\n   layoutNode: any;\r\n   layoutIndex: number[];\r\n   dataIndex: number[];\n/**\n * @param {?} jsf\n */\nconstructor(\nprivate jsf: JsonSchemaFormService\r\n  ) { }\n/**\n * @return {?}\n */\nngOnInit() {\r\n    this.options = this.layoutNode.options || {};\r\n    this.updateControl();\r\n  }\n/**\n * @return {?}\n */\nngDoCheck() {\r\n    if (this.previousLayoutIndex !== this.layoutIndex ||\r\n      this.previousDataIndex !== this.dataIndex\r\n    ) {\r\n      this.updateControl();\r\n    }\r\n  }\n/**\n * @param {?} event\n * @return {?}\n */\naddItem(event) {\r\n    event.preventDefault();\r\n    this.itemCount = this.layoutIndex[this.layoutIndex.length - 1] + 1;\r\n    this.jsf.addItem(this);\r\n    this.updateControl();\r\n  }\n/**\n * @return {?}\n */\nupdateControl() {\r\n    this.itemCount = this.layoutIndex[this.layoutIndex.length - 1];\r\n    this.previousLayoutIndex = this.layoutIndex;\r\n    this.previousDataIndex = this.dataIndex;\r\n    this.showAddButton = this.layoutNode.arrayItem &&\r\n      this.itemCount < (this.options.maxItems || 1000000);\r\n  }\n/**\n * @return {?}\n */\nsetTitle(): string {\r\n    const /** @type {?} */ parent: any = {\r\n      dataIndex: this.dataIndex.slice(0, -1),\r\n      layoutNode: this.jsf.getParentNode(this)\r\n    };\r\n    return this.jsf.setTitle(parent, this.layoutNode, this.itemCount);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'add-reference-widget',\r\n  template: `\r\n    <button *ngIf=\"showAddButton\"\r\n      [class]=\"options?.fieldHtmlClass\"\r\n      [disabled]=\"options?.readonly\"\r\n      (click)=\"addItem($event)\">\r\n      <span *ngIf=\"options?.icon\" [class]=\"options?.icon\"></span>\r\n      <span *ngIf=\"options?.title\" [innerHTML]=\"setTitle()\"></span>\r\n    </button>`,\r\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: JsonSchemaFormService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'formID': [{ type: Input },],\n'layoutNode': [{ type: Input },],\n'layoutIndex': [{ type: Input },],\n'dataIndex': [{ type: Input },],\n};\n}\n\nfunction AddReferenceComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nAddReferenceComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nAddReferenceComponent.ctorParameters;\n/** @type {?} */\nAddReferenceComponent.propDecorators;\n/** @type {?} */\nAddReferenceComponent.prototype.options;\n/** @type {?} */\nAddReferenceComponent.prototype.itemCount;\n/** @type {?} */\nAddReferenceComponent.prototype.showAddButton;\n/** @type {?} */\nAddReferenceComponent.prototype.previousLayoutIndex;\n/** @type {?} */\nAddReferenceComponent.prototype.previousDataIndex;\n/** @type {?} */\nAddReferenceComponent.prototype.formID;\n/** @type {?} */\nAddReferenceComponent.prototype.layoutNode;\n/** @type {?} */\nAddReferenceComponent.prototype.layoutIndex;\n/** @type {?} */\nAddReferenceComponent.prototype.dataIndex;\n/** @type {?} */\nAddReferenceComponent.prototype.jsf;\n}\n\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}